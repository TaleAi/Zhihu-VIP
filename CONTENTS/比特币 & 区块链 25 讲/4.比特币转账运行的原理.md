## 4.比特币转账运行的原理
在第 3 讲开始前，先简单复习下第 2 讲的核心内容：第2讲主要讲了比特币的转账机制和7个区块链的基本概念。不知道你还记得多少？让我们一起来复习下。


比特币的转账机制就像我们在银行卡转账一样的简单，第一步登录你的比特币钱包，第二步选好要从自己哪个比特币地址进行转币，第三步填写收币的比特币钱包地址，写入转币数额与手续费，等待矿工打包处理就 ok 了。


7 个区块链的基本概念：


* 第一个，「挖矿」：获得记账权的过程形象地叫做「挖矿」；
* 第二个，「矿工」：是竞争挖矿的人或组织叫「矿工」；
* 第三个，「算力」，就是假设一台矿机为 10T 左右的计算量级，我们就可以说这一台 10T 的矿机就有 10T 的算力；
* 第四个，「工作量证明」，简单理解是「干得越多、收得越多」，简称「PoW」；
* 第五个，「权益证明」，简单理解是「持有越多、获得越多」，简称「PoS」；
* 第六个，「区块」，平均每 10 分钟网络诞生账本的一页，我们称之为区块；
* 第七个，「区块链」，每个区块被打上时间戳，按照严格的先后顺序，连接起来，就叫区块链。

第 2 讲的概念很重要，建议你反复听下，有助于后面的学习。好，下面开始第 3 讲：


我们知道 2008 年神秘人中本聪发明比特币的时候，是因为当时发生了全球经济危机，中本聪想，如果能构建一个没有中心机构的货币发行体系，货币就不会被无限超发，大家都很公平公正。于是中本聪构建了比特币这样一个体系。


那么，在一个没有中心化机构的情况下，比特币的发行、记账、交易是怎样进行的呢？


中本聪首先规定了比特币的发行机制。它规定比特币的总量为 2100 万枚，比特币网络大约每 10 分钟出一页账单，每个比特币的产生伴随着每一页账单的产生，也就是每一个区块问世和发行。中本聪还规定，最开始每个区块的比特币奖励是50枚，然后每 21 万个区块减半一次。一直到 2140 年。所有的比特币发行完毕。


21 万个区块，我们算一算，平均每 10 分钟出一个区块，出 21 万个区块需要多久呢？理论上需要 1458.3 天，也就是 3.99 年。这也就是大众说的「比特币每四年减半」的由来。2016 年 7 月 8 日开始，比特币第二次减半，也就是每个区块伴随的比特币奖励为 12.5 枚。


我们怎么去计算现在的区块是第多少个区块呢？很简单，大家用「区块高度」来标记它。也就是一个区块的高度是从比特币诞生之后，第多少个区块。打开任意一个比特币的区块浏览器，我们可以看到现在出来的最新的区块高度。通过区块高度，我们可以计算大概还有多久，比特币会进行下一次减半、多久会进行难度的调整、多久进行一次大事件。


然后中本聪规定了记账的形式。我们知道比特币采用的是工作量证明机制，即
 PoW 机制。所有的矿工通过竞争哈希计算的方式，争夺记账权力。类似每 10 分钟有一道数学题被丢到网络中，大家比赛，看谁算的快。在每一轮的竞争中，谁最先计算出正确答案，谁就获得了本轮的记账权力。他记录的本页账单，大家都要以此为准。紧接着，大家在这一页账单的基础上，争夺下一页账单的记账权。通过这种共识机制，中本聪解决了在一个去中心化的体系下，账本的唯一性的权益。


矿工为什么要竞争记账呢？用计算机进行计算要消耗电、要存储大量的数据，这样做对矿工有什么好处呢？毕竟纯粹靠公益，这样的体系走不长远。


这也是中本聪最为聪明的一个地方：他把比特币的发行和竞争记账绑定在了一起，记账的人每获得一次记账权，就会获得系统产生的新的比特币作为奖励。也就是说算的最快的计算机，就会「挖」到一定数量的比特币。


在每一轮竞争记账中，谁获得记账权，谁就获得这一个区块里的新诞生比特币奖励和被记录在账单里的交易的手续费。在 2017 年，如果你是一个矿工，在一轮竞争中获得了记账权，你就会获得 12.5 个新发行的比特币奖励，还有这个区块上所有的手续费，大约零点几到 2 个比特币手续费。随着新生比特币每四年减半，新生比特币奖励越来越少，那么矿工还会有动力去挖矿吗？


答案是肯定的。因为他们还有另外一部分收入，就是大家给的比特币转账的手续费。大家还记得我们提到在比特币的世界里转账手续费是可以自己填写的吗？随着使用比特币的人和机构越来越多，全球比特币转账越来越频繁，转账手续费总量也会越来越大，手续费会未来成为矿工的主要收入来源。


第二讲中我们讲到比特币的转账，跟我们平时进行银行转账一样，我们选择一个有比特币的地址，输入对方的比特币地址，输入想转账的金额，输入给矿工的手续费，然后用私钥进行签名，提交之后就等着矿工们来处理。中本聪通过加密机制，使得随机生成的一个私钥只能对应一个地址，保证了每个地址发出比特币的合法性。


比特币现在的每个区块大小是 1M 字节，大概能容纳一千笔交易。当网络转账的人比较少时，等待矿工确认的你可能只需要等 10 分钟，就能被下一个区块确认了。如果当前转账的人比较多，你可能要排队，多等一个 10 分钟，甚至更长时间。矿工们会不断的等待记录的转账交易里面去选择手续费比较高的转账信息来进行记账，如果你的手续费不排在前面，可能就要排在很后面才能够记你的账了。


通过这样的设计，中本聪使得比特币的发行、比特币的记账和转账等环节环环相扣，使得整个体系能够自发运转起来。现在，即使中本聪这个核心人物已经销声匿迹，我们看到比特币的自发的生命力，这就是去中心化体系的魅力。


哦对了，虽然比特币总量只有 2100 万枚，但是每一枚比特币可以分割到小数点后8位，也就是一枚比特币可以分割为 1 亿份。你可以转给别人非常非常小的一份比特币，不信，你可以买一个半个比特币试试。


我们来总结一下。通过这节课，我们了解了比特币的发行、记账和交易原理。比特币的发行遵循每个比特币的产生伴随着每一页账单的诞生，并且比特币每四年减半；比特币的记账采用竞争记账的方式，就是记账者获得新生比特币奖励和被记录在账单里的交易的手续费；而比特币的交易，和银行卡交易基本上一样简单。比特币网络，通过规定发行机制、共识机制和加密技术将比特币的发行、记账和转账环环相扣，构成了一个自发发展壮大的庞大体系。 


思考：随着打包交易数据越来越多，当每个区块的 1M 容量越来越无法应付时，能用什么办法来解决呢？

