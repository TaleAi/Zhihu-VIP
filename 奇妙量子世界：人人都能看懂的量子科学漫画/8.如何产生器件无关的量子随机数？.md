## 8.如何产生器件无关的量子随机数？
生活中处处都有随机数。用手机听歌的人都知道，很多 App 都有一种放歌的方式，叫作「随机播放」。玩游戏的人都知道，游戏地图会随机设置怪物，打怪的时候会随机掉物品，开宝箱的时候会随机掉宝贝。在这些事情的背后，都有一个共同的起因，叫作随机数   。  


  



![img](https://pic2.zhimg.com/v2-ffc56b93ec6c106af2e525f42168514f_r.webp)

  



不过，很多计算机程序并不会真的产生随机数，因为计算机只会计算，并不是真的会「随机应变」。所以，我们平常接触到的随机播放、随机打怪和随机掉宝贝，其实都不是真随机，而是为了方便和实用，通过计算产生的确定结果，是「假冒伪劣」的伪随机。


  



![img](https://pic3.zhimg.com/v2-de678e78111fc8ae825236d50f815fce_r.webp)

  



就算随机数不是算出来的，而是从掷骰子、读取环境噪声等经典随机现象中产生的，也不能算作真正的随机数。 


  



![img](https://pic1.zhimg.com/v2-82bc92bbfe233ee9aa1cb39085a7983e_r.webp)

  



  



![img](https://pic1.zhimg.com/v2-8b2df5c6b33922416cbaad5a07939e81_r.webp)

  



因为从理论上讲，只要你舍得投入，经典随机现象都是可以准确预测的。例如，如果你用一台摄像机精确拍下你刚刚掷出骰子时，骰子的位置、速度和角速度，那么从理论上讲，计算机就可以在骰子落下之前，计算出它的落点和朝向。这样一来，经典随机就不是完全没可能破解的了。 


那么，世界上有没有不可能被破解的随机数呢？自从量子力学诞生以后，物理学家就发现，量子力学存在内禀的随机性，很多实验都会产生随机的结果。在量子力学的主流理论中，没有任何人能通过任何办法预测实验产生的随机结果，这就是量子随机。因此，从这些结果出发生成的随机数，在现在的理论框架下是无法预测的。 


  



![img](https://pic3.zhimg.com/v2-f7c0ecbe6b6eb5cb541bdb99e4c5e94e_r.webp)

  



  



![img](https://pic3.zhimg.com/v2-b353de81826a17f83a2a2178022c8365_r.webp)

  



这么说来，如果哪里要用随机数，我们只需要随便搭建一个量子力学实验，就可以放心大胆地使用随机数了吗？可以倒是可以！ 


但是，在工程实践中，很多实验器件都不可能 100% 地完美运行。它们要么有瑕疵，要么用着用着就开始老化，要么会受到各种因素干扰，在极端的情况下，它们还会受到黑客攻击！ 


  



![img](https://pic2.zhimg.com/v2-0b5ebdb7dacf8e86cd416a9c54ea2d15_r.webp)

  



于是，为了得到更稳定、更安全的量子随机数（即使有最强大的攻击者也不能预测未来的随机数），中国科学技术大学教授潘建伟及其同事张强、马雄峰等与中科院上海微系统所和日本 NTT 基础科学实验室合作，实现了一种产生随机数的新方法，这样的随机数叫作「器件无关的量子随机数」。2018 年 10 月 25 日，他们的实验论文发表在了《自然》杂志上。 


#### 产生器件无关的量子随机数的实验装置


  



![img](https://pic1.zhimg.com/v2-d7d4617f0986d7335a9b92d9589e74ea_r.webp)

这种新方法是如何解决普通量子随机数装置的各种缺陷，做到随机数与器件无关的呢？其中有 3 个关键步骤：1. 质量检测；2. 估算良品率；3. 汰劣留良。 


  



![img](https://pic1.zhimg.com/v2-000f520cdded93094a6ee2149bb2b59a_r.webp)

  



#### 1. 质量检测


要想保证随机数的质量，他们要抽取一部分实验结果，进行质量检测。为了能够进行质量检测，他们首先要在实验中，同时产生出一对处于量子纠缠态的光子。 


对每个纠缠光子的测量会得到一个测量结果。对这两个纠缠光子同时测量，就会同时得到两个结果。但这两个结果还不是能够直接用的随机数，而是有待处理的、原始的随机数物料。这时，他们就要做质量检测了，办法就是将结果代入以物理学家贝尔命名的一个不等式——贝尔不等式中。 


  



![img](https://pic1.zhimg.com/v2-ecc5b702665484fa14ee2dd4cd420eff_r.webp)

  



当然，用一个光子做实验，是没有办法用这个不等式做质量检测的。只有用一对纠缠光子做实验，把这两个结果代入这个不等式中，才能进行量子随机数的质量检测。 


  



![img](https://pic2.zhimg.com/v2-77fe78705cc626e638cf99264fbe985f_r.webp)

  



  



![img](https://pic1.zhimg.com/v2-099859071533fea34d820541ee4eeb0a_r.webp)

  



于是，他们把一段时间内产生的结果代入不等式后，如果计算结果大于某个值，那就说明贝尔不等式被破坏，实验结果包含真正的量子随机性。如果计算结果小于或等于某个值，那就说明贝尔不等式仍然成立，不能证明结果中存在量子随机性，可能是实验装置出问题了，也可能是有人在偷偷搞破坏。 


用来产生随机数和做质量检测的实验，叫作贝尔实验。1965 年，CERN 的物理学家贝尔提出了贝尔实验的设想。不过，他当时并不是为了检验随机数是真是假，而是为了检验量子力学的完备性。（详情请看《星光下的贝尔实验》）  


#### 2. 估算良品率


虽然实验结果是真的量子随机，但请你不要忘了，刚才我们说过，很多实验器件都会存在瑕疵。所以，他们得到的实验结果还只是原始的随机数物料，其中可能已经混入了各种各样的不想要的「噪声」「杂质」或者「冗余」。 


因此，在第二个关键步骤中，他们必须不断估算每一时刻的物料中，究竟含有多少能用的随机数，也就是估算良品率的大小。具体的估算方法包含很多复杂的数学知识。简单地说，就是不断观察贝尔的那个不等式被违反的程度有多大。 


  



![img](https://pic3.zhimg.com/v2-b1a65c87bf519a3ff3f89c3a0a5a78f6_r.webp)

  



注：小于 0 就说明有问题。 


  



![img](https://pic3.zhimg.com/v2-207a0bbdc0d4a1256f4f856791d9b85c_r.webp)

  



所以，通过不断对产生的随机数物料做质量检测，实验团队就可以随时搞清楚，每一时刻产生的量子随机数到底有多少，如果单位时间内得到的量子随机数变少了，就说明系统的性能下降了，或者有黑客在恶意干扰系统。 


#### 3. 汰劣留良


既然知道了每时每刻产生的结果中，有多少「良品」。那么第三个关键步骤，就应该是汰劣留良，通过某种复杂的数学运算，把大量物料中好的成分留下来，把不能用的成分统统扔掉。 


  



![img](https://pic1.zhimg.com/v2-e4d6e3bfce0b556b06e77a00f7dbc328_r.webp)

  



  



![img](https://pic3.zhimg.com/v2-44578db595958d1818c12835fd328ff2_r.webp)

  



于是，这篇论文同时证明，在非常极端的情况下，就算实验装置中的纠缠源和探测装置都被黑客控制了，实验团队只要能够控制数据的输入、输出及数据处理，黑客就无法在不被察觉的前提下窃取其中的随机数。 


为什么这么说呢？因为不管黑客捣不捣乱，最终都会有这么一个「把好的成分留下来，把不能用的成分统统扔掉」的过程，所以，留下的东西总是安全可靠的，使用者不用担心安全问题。 


因此，「器件无关的量子随机数」的意思是说，安全的量子随机数可以仅仅通过输入、输出数据进行产额的检验和计算，以及最终随机数的生成，与实验器件（以及谁制造的设备）无关。 


说了这么多，量子随机数的真假真的有那么重要吗？没有高质量的随机数，我们平时不是照样打怪捡装备吗？其实，除了听歌和玩游戏之外，还有很多领域会用到高质量的随机数。 


例如，在预报天气、研制新药、设计新材料、仿真计算和研制核武器的时候，在进行人工智能研究、开展保密通信的时候，人们都要用到安全、稳定、真正的随机数。如果这项量子随机数的研究及后续研究能够实用化，就能让各个领域的人们用上真正可靠的随机数。 


  



![img](https://pic1.zhimg.com/v2-5194b90f42cc98d9127bc243a876bff6_r.webp)

注释： 


通常的量子纠缠态都很脆弱。所以，用量子纠缠产生量子随机数的时候，非常考验装置的稳定性。为了提高装置的性能，实验团队发展了高性能纠缠光源，优化了纠缠光子收集、传输、调制等效率，并采用中科院上海微系统所开发的高效率超导单光子探测器件，实现了高性能纠缠光源的高效探测。同时，他们通过设计快速调制并进行合适的空间分隔设计，满足了器件无关的量子随机数产生装置所需的类空间隔要求。最终，在世界上首次实现了可防御量子攻击的器件无关的量子随机数产生器。 


因此这套设备可以长时间稳定运行，这是它具有实用价值的关键，也为将来影响随机数标准的制定奠定基础。 


参考文献： 


Yang Liu, Qi Zhao, et al.,  Device-independent quantum random-number generation,  Nature 562,548-551(2018). 


备案号:YX01NeOWD1z0jGEGP

